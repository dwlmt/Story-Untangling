{
  "dataset_reader":{
    "type":"writing_prompts",
    "source_token_indexers": {
      "tokens": {
        "type": "single_id",
        "namespace": "source_tokens"
      }
    },
    "target_token_indexers": {
      "tokens": {
        "type": "single_id",
        "namespace": "target_tokens"
      }
    },
    "dataset_path": "/disk/scratch/writing_prompts_dataset_path/",
    "use_existing_cached_db": false,
    "target_positive": true,
    "target_negative": true,
    "save_sentiment": true,
    "ner_model": "https://s3-us-west-2.amazonaws.com/allennlp/models/fine-grained-ner-model-elmo-2018.08.31.tar.gz",
    "coreference_model": "https://s3-us-west-2.amazonaws.com/allennlp/models/coref-model-2018.02.05.tar.gz",
    "lazy": true
  },
  "train_data_path": "/afs/inf.ed.ac.uk/group/project/comics/stories/datasets/writingPrompts/train.wp_target",
  //"/afs/inf.ed.ac.uk/group/project/comics/stories/datasets/writingPrompts/first_500",
  //"/afs/inf.ed.ac.uk/group/project/comics/stories/datasets/writingPrompts/train.wp_target",
  "validation_data_path": "/afs/inf.ed.ac.uk/group/project/comics/stories/datasets/writingPrompts/valid.wp_target",
  "test_data_path": "/afs/inf.ed.ac.uk/group/project/comics/stories/datasets/writingPrompts/test.wp_target",

  "model": {
    "type": "simple_seq2seq",
    "source_embedder": {
      "tokens": {
        "type": "embedding",
        "embedding_dim":150,
        "vocab_namespace": "source_tokens",
        "trainable": true
      }
    },
    "encoder": {
      "type": "lstm",
      "input_size": 150,
      "hidden_size": 150,
      "num_layers": 5
    },

    "max_decoding_steps": 200,
    "target_namespace": "target_tokens",
    "attention_function": {"type": "dot_product"}
  },

  "iterator": {
    "type": "epoch_tracking_bucket",
    "batch_size": 60,
    "sorting_keys": [
      [
        "source_tokens",
        "num_tokens"
      ],
      [
        "target_tokens",
        "num_tokens"
      ]
    ]
  },

  "trainer": {
    "num_epochs": 1,
    "patience": 10,
    "cuda_device": -1,
    "optimizer": {
      "type": "adam",
      "lr": 0.01
    }
  }
}